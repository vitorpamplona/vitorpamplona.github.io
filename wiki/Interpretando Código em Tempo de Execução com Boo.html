---
title: "Interpretando Código em Tempo de Execução com Boo"
permalink: /wiki/Interpretando Código em Tempo de Execução com Boo
redirect_from: /wiki/Interpretando+Código+em+Tempo+de+Execução+com+Boo
---
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta http-equiv="content-language" content="pt-BR,en-US">
  <meta name="copyright" content="Vitor Fernando Pamplona">
  <meta name="robots" content="follow">
  <meta name="revisit-after" content="3 days">
  <meta name="rating" content="general">
  <meta property="fb:admins" content="1352207037" />
  <meta name="verify-v1" content="PEmbDgMrDta4EuJW0kdAcwnNetOEgCFwPEg+108t7/E=" />

  <meta name="description" content=" Uma das features mais legais das linguagens de script é a interpretação de código em tempo de execução. Claro, nas outras linguagens isso também é possível, mas certamente é bem mais trabalhoso. , Author: Vitor Fernando Pamplona" />
  <meta name="keywords" content="Vitor, Vitor Pamplona, Vitor Fernando Pamplona, Rails, Ruby, Java, C++, Mestrado, Doutorado, Engenharia de Software, Usabilidade, Efetividade, Boo, Carreira" />
  <meta name="author" content="Vitor Fernando Pamplona" />
  <link rel="alternate" type="application/rss+xml" title="Vitor Pamplona's Feed" href="http://vitorpamplona.com/lastChangesRss.pr" />
  


  <title>Interpretando Código em Tempo de Execução com Boo :: Vitor Pamplona</title>

  <link rel="stylesheet" type="text/css" media="all" href="../interface/css/style.css" />

  <link rel="StyleSheet" href="../interface/includes/tree/dtree.css" type="text/css"> </link>
  <script type="text/javascript" src="../dtree.pr.html"></script>        


	<script class="javascript" src="http://vitorpamplona.com/deps/syntax/shCore.js"></script>
<script class="javascript" src="http://vitorpamplona.com/deps/syntax/shBrushJava.js"></script>
<script class="javascript" src="http://vitorpamplona.com/deps/syntax/shBrushRuby.js"></script>

<link href="http://vitorpamplona.com/deps/syntax/SyntaxHighlighter.css" type=text/css rel=stylesheet>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1248613-2");
pageTracker._initData();
pageTracker._trackPageview();

function f_unload() {pageTracker._trackPageview("/endpage");}
window.onunload = f_unload;
</script>
      

<!-- Place this tag in your head or just before your close body tag -->
<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>



<script language="JavaScript">
	function toggleVisibility(me){
   		el = document.getElementById(me);
		if (el.style.display=='none'){
			el.style.display='';
		} else {
			el.style.display='none';
		}
	}	
</script>
  
</head>

<body>

    <div class="page-container">
	
   
    <!-- Sitename and Banner -->
	<div class="site-name">
		 Vitor Pamplona
	</div>	
	  	<div class="site-slogan">
  <p>Innovation on Vision: <a href="http://eyenetra.com">Imaging</a> , <a href="http://tailoreddisplays.com">Enhancement</a> and <a href="http://vitorpamplona.com/wiki/Photorealistic%20Models%20for%20Pupil%20Light%20Reflex%20and%20Iridal%20Pattern%20Deformation">Simulation</a></p>
		</div>
		
    	<div class="nav-main nav-main-font">			
		<!-- Main Navigation -->
		<ul>
                



      	<li><a href="index.html"  class="selected" >Highlights</a></li>

		<li><a href="Papers.html"  class="selected" >Research Projects</a></li>



<li><a href="../tagIndex.pr.html" >
Personal Thoughts</a></li>

		<li><a href="http://www.twitter.com/vitorpamplona" >Live Updates</a></li>

		<li><a href="https://plus.google.com/101404049137638062356/posts">Shared Stories</a></li>

        	
                


    	  <li><a href="Curriculum.html">Curriculum</a></li>

		        	
        			
		
						
		</ul>
		
	</div>
	
	<div class="buffer"></div>

	<!-- WRAP CONTENT AND SIDEBAR -->
    <div class="container-content-sidebar-front">

	<!-- div class="left-menu">
	    <div class="left-sidebarbox-border bg-blue02">
	    	<div class="sidebarbox-title-shading bg-blue05">
	    	     Menu
	    	</div>
	    	
	    	<ul>
        	<li><a href="/wiki/"  class="selected" >Front Page</a></li>
        	<li><a href="/lastChanges.pr"  class="selected" >Blog</a></li>
        	<li><a href="/new.pr"  class="selected" >New Page</a></li>
			        	<li><a href="/showSignUp.pr"  class="selected" >Sign Up</a></li>        	
        	        		    	</ul>
	    </div>		
	</div -->
	<!-- Continue in index.vm -->      
	
		

<div class="content content-font">
		
	
		<div class="contentbox-full">	

	
			<div class="left-menu">	
																					
			

			</div>
				
						<!-- SIDEBAR -->		
	  		<div class="sidebar sidebar-font">
	  			
	  		
									
								
												
				

			</div>

			<h1 class="line-black"> Interpretando Código em Tempo de Execução com Boo</h1> 

						        				


								<div class="contentbox-noshading">





					<p> Uma das features mais legais das linguagens de script é a interpretação de código em tempo de execução. Claro, nas outras linguagens isso também é possível, mas certamente é bem mais trabalhoso. </p> <p> Hoje de manhã, resolvi ver como seria esta feature na linguagem <a href="http://boo.codehaus.org/">Boo</a>. Para quem não conhece, o Boo é uma linguagem de script estilo python para. Net, desenvolvido como hobbie pelo Rodrigo Bamboo, um brasileiro anormal, um ponto fora da curva. Como se integra a CLI, ele utiliza as bibliotecas disponíveis para Dot Net ou Mono e, por incrível que pareça, também <a href="http://docs.codehaus.org/display/BOO/Boo+And+Java" target="_blank">acessa as bibliotecas Java</a>. Recentemente o Rodrigo liberou um port do Boo que <a href="http://blogs.codehaus.org/people/bamboo/archives/001623_introducing_boojay.html" target="_blank">roda sobre a JVM</a> ao invés do Mono ou do Dot Net. Para os viciados em IDEs, já existem plugins para Boo em Eclipse (boojay), MonoDevelop e SharpDevelop. Para conhecer a história da linguagem e o que levou o Rodrigo a criá-la, leia o <a href="http://boo.codehaus.org/BooManifesto.pdf" target="_blank">manifesto</a>. <br /> <br /> A Boo possui diversas características interessantes como: </p> <ul> <li> <a href="http://boo.codehaus.org/Duck+Typing">Duck Typing</a>: Se algo caminha como um pato e faz quack como um pato então deve ser um pato. </li> <li> <a href="http://boo.codehaus.org/Closures">Closures</a> </li> <li> <a href="http://boo.codehaus.org/Interactive+Interpreter">Interpretador Interativo</a>: Semelhante ao Python. <br /> </li> <li> <a href="http://boo.codehaus.org/Slicing">Slicing</a>: Dado que <strong> L </strong> é uma lista com 40 elementos, você pode fazer: L [10:30]. </li> <li> <a href="http://boo.codehaus.org/Syntactic+Macros">Macros</a>: Lembra as macros do C + +. É utilizado para simplificação de código. </li> <li> <a href="http://boo.codehaus.org/String+Interpolation">String Interpolation</a>: Manipulação de Strings semelhante ao velocity. </li> <li> <a href="http://boo.codehaus.org/Generators">Generators</a>: formas diferentes de escrever laços. </li> </ul> <p> Boo se diferencia das outras linguagens de script por uma única característica: <a href="http://boo.codehaus.org/Interactive+Interpreter" target="_blank">Facilidade para criar extensões</a>. Ele tem um pipeline de compilação extensível, ou seja, você pode adicionar as suas características no compilador do boo. Engana-se quem pensa que isso é complicado, na verdade, em Boo é bem simples extender, tanto o compilador quanto a linguagem. Usar um interpretador em tempo de execução, então, nem se fala. </p> <p> Como eu sou um cara bem prático, arrumei logo um objetivo para o meu primeiro teste com Boo: Criar uma tela na qual uma terceira pessoa pudesse adicionar as regras de negócio. Esse tipo de customização é um problema comum nos ERPs de propósito geral. Sempre que alguém implanta um ERP destes, surgem mudanças que devem ser feitas para aumentar a produtividade de um cliente específico. Exemplo, se ele lança muitas notas fiscais semalhantes, é interessante ter um botão para duplicar a nota atual, zerando apenas alguns campos. Se só existem pagamentos em dinheiro, é interessante deixar invisível os botões pagamento com Cheque, Cartão ou Vale Compras. </p> <p> Desenvolvi a tela em questão com GTK + Mono + MonoDevelop no Ubuntu 7.10. Não sei como são os procedimentos de instalação destas bibliotecas no Windows. No meu caso, eu instalei o GTK, o <a href="http://gtk-sharp.sourceforge.net/">GTK-Sharp</a>, o Mono, o <a href="http://www.monodevelop.com/">MonoDevelop</a> com Boo e o compilador do Boo via apt-get, mas você pode usar o <a href="http://www.nongnu.org/synaptic">Synaptic</a>, assim como usar <a href="http://www.eclipse.org/swt/">SWT</a> + <a href="http://blogs.codehaus.org/people/bamboo/archives/001629_boojay_does_eclipse.html">Boojay</a> e Eclipse se preferir. </p> <p> Com o ambiente pronto, abra o MonoDevelop e crie um Novo Projeto Boo-GTK #. Selecione o GTK # Suport se você preferir criar a tela graficamente, eu criarei via programação mesmo. Depois de criado, o projeto já tem apenas 2 arquivos: Main.boo </p> <pre class="c-sharp">// project created on 16/12/2007 at 15:20<br />import Gtk<br /><br />Application.Init()<br />w = MyWindow("Window")<br />w.ShowAll()<br />Application.Run() <br /></pre> <p> e o MyWindow.boo </p> <pre class="c-sharp">import System<br />import Gtk<br /><br />class MyWindow(Window):<br />    def constructor(title as string):<br />        super(title)<br />        SetDefaultSize(400, 300)<br />        DeleteEvent += { Application.Quit() }</pre> <p> Se você executar esse código aparecerá uma tela em branco. </p> <p> Nós iremos criar uma tela semelhante a tela abaixo. É composta por duas abas, a primeira é onde está o formulário normal da aplicação, na segunda estará o código a ser executado quando o botão da primeira aba for pressionado. Como é para ser um exemplo simples, a função deste botão é apenas copiar o texto escrito no Edit e colocar no Label abaixo dele. O botão abaixo do texto na segunda aba irá compilar o código e setar a função para o botão <strong> Go </strong> da primeira aba. </p> <p>   </p> <div style="text-align: center"> <img src="http://i27.tinypic.com/242yeqe.png" border="0" alt="Janela em Boo" hspace="10" vspace="10" width="730" height="291" /> </div> <p>   </p> <p> Para construir essa tela, adicione ao construtor um simples código Boo + GTK-Sharp </p> <pre class="c-sharp">    def constructor(title as string):<br />        super(title)<br />        SetDefaultSize(400, 300)<br />        DeleteEvent += { Application.Quit() }<br />        <br />        note = Notebook()<br />        <br />        // First Tab: Frame<br />        dynamicFrame = VBox()<br />        note.Add(dynamicFrame)<br /><br />        hbox = HBox()<br />        <br />        entry = Entry();<br />        entry.Text = "Default value"<br />        entry.SelectRegion(0, entry.Text.Length)<br />        hbox.Add(entry)<br />        <br />        go = Button("Go!")<br />        hbox.Add(go)<br />        <br />        result = Label();<br />        result.Text = "Waiting..."        <br />        <br />        dynamicFrame.PackStart(hbox, false, true, 3)<br />        dynamicFrame.Add(result)<br />        <br />        // Second Tab: Source<br />        dynamicSource = VBox()<br />        note.Add(dynamicSource)<br />        <br />        code = TextView()        <br />        code.Buffer.Text += "import System \n\n"<br />        code.Buffer.Text += "def Button_Clicked(o, args as EventArgs):\n"<br />        code.Buffer.Text += "    result.Text = entry.Text \n"<br />        code.Buffer.Text += "\n"<br />        code.Buffer.Text += "go.Clicked += Button_Clicked \n"<br />        code.Buffer.Text += "print \"Runned\" \n"<br />        dynamicSource.Add(code)<br /> <br />        refresh = Button("Refresh!")<br />        dynamicSource.PackEnd(refresh, false, true, 0)<br /> <br />        Add(note)         <br /></pre> <p> Depois disto basta rodar e você terá a sua tela. Repare que a Boo possui escopo orientado a indentação, por isso, dentro do construtor são necessários 2 tabs para cada linha. </p> <p> Após, adicione um callback para o botão <strong> refresh </strong>, que deve interpretar o código. </p> <pre class="c-sharp">    def Refresh_Button(o, args as EventArgs):<br />        print "Evaluating" </pre> <p> E atribua o callback após a criação do <strong> refresh </strong> no construtor. </p> <pre class="c-sharp">        refresh.Clicked += Refresh_Button </pre> <p> Agora vem a mágica. Para compilar o que está na propriedade <strong> Text </strong> do <strong> code </strong> importe o Interpretador do Boo logo após o import da GTK: </p> <pre class="c-sharp">import System<br />import Gtk<br />import Boo.Lang.Interpreter <br />...<br /></pre> <p> Transforme as variáveis locais <strong> entry </strong>, <strong> result </strong>, <strong> code </strong> e <strong> go </strong> em atributos de classe </p> <pre class="c-sharp">...<br />class MyWindow(Window):<br />    entry as Entry<br />    result as Label<br />    code as TextView<br />    go as Button<br /><br />    def constructor(title as string):<br />	... <br /></pre> <p> E, por fim, mande o programa interpretar o <strong> code.Buffer.Text </strong> </p> <pre class="c-sharp">    def Refresh_Button(o, args as EventArgs):<br />        print "Evaluating"<br />        interpreter = InteractiveInterpreter()<br />        interpreter.SetValue("go", go)<br />        interpreter.SetValue("result", result)<br />        interpreter.SetValue("entry", entry)<br />        interpreter.Eval(code.Buffer.Text) <br />        print "Evaluated"         <br /></pre> <p> Repare que é necessário setar as variáveis que serão utilizadas no Script. Caso contrário, ele não terá acesso a nenhuma variável do programa. </p> <p> Pronto! Execute, clique no botão <strong> Go! </strong> e nada acontecerá, clique em <strong> Refresh! </strong> e você aplicará a regra de interface. Clicando em <strong> Go! </strong> novamente você verá a mágica. Alterando o texto para: </p> <pre class="c-sharp">import System <br /><br />def Button_Clicked(o, args as EventArgs):<br />    result.Text = "Valor: " + entry.Text<br />    result.Angle += 20  <br /><br />go.Clicked += Button_Clicked <br />print "Runned" </pre> <p> ao clicar em <strong> Go! </strong> será exibido a sentença " Valor: " antes do texto do <strong> entry </strong> e o texto irá girar um ângulo de 20 graus anti-horário a cada clique. Fácil não é? </p> <p> E tem mais. Se você quiser, pode colocar um code completion facilmente. Dê uma olhadinha no vídeo <a href="http://db4oboobrowser.sourceforge.net/">desta aplicação</a> que fez um pouco mais do que eu. </p> <p> Se precisar de ajuda para trabalhar com GTK, visite: <a href="http://www.go-mono.com/docs" target="_blank">http://www.go-mono.com/docs</a> </p>


					
<script type="text/javascript"><!--
google_ad_client = "pub-7740443081675700";
/* 728x90, criado 06/04/10 */
google_ad_slot = "4989522421";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<div id="ads"><script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"> </script></div>


                                <div>
                                        <p  class="postedBy">Posted in Dec 4, 2008 by <a href="../userHistory.pr%3FpostUser=vfpamp.html">Vitor Pamplona</a> -

                                                                                                                                                <a href="../edit.pr%3Fkeyword=Interpretando%2520C%25C3%25B3digo%2520em%2520Tempo%2520de%2520Execu%25C3%25A7%25C3%25A3o%2520com%2520Boo.html">Edit</a> -
                                                                                        
                                        <a href="../history.pr%3Fkeyword=Interpretando%2520C%25C3%25B3digo%2520em%2520Tempo%2520de%2520Execu%25C3%25A7%25C3%25A3o%2520com%2520Boo.html">History</a>
                                        					</p>
                                </div>
				</div>
				
				

					</div>
			
		
	<div id="fb-root"></div>
<script>
(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));
</script> 

<script type="text/javascript">
String.prototype.endsWith = function(suffix) {
    return this.indexOf(suffix, this.length - suffix.length) !== -1;
};

var url = window.location.href;
if (url.indexOf("Front%20Page") < 0  && url.indexOf("wiki/;jsessionid") < 0 && url.indexOf("lastChanges") < 0 && !url.endsWith("/wiki/")) {
   document.write('<div class="fb-comments" style="margin-left: 15px; border-bottom: solid 1px #546F90;" data-href="' + url + '" data-num-posts="10" data-width="800"></div>');
}
</script>             

	
					<div class="contentbox-full">
       		<h1 class="line-black">Showing Comments</h1> 
			
				<div class="contentbox-full-border">
			<div class="content-padding">
				<div class="contentbox-noshading">
					<p>Do manifesto: <BR> <BR> " " " The guys who came up with “ public static void main ” were probably kidding, the <BR> problem is that most people didn't get it was a joke. " " " <BR> <BR> Bah, muito boa! Expressou o que eu sempre pensei de um jeito muito engraçado! <BR> <BR> Achei bem legal a linguagem Boo. Já tinha ouvido falar, mas não tinha dado a devida atenção. Também não sabia que era uma linguagem brasileira!: - O <BR> <BR> Gostei que tem macros, public / private (faz falta em Python) e a tipagem estática + duck combina deve combinar o melhor das duas. E, é claro, ver a sintaxe no estilo Python sendo usada em outras linguagens é bem legal. <BR> <BR> Vai entrar na minha lista de linguagens a aprender (mas isso não quer dizer nada, tem umas que estão há anos na lista, hehehe) <BR> <BR> - - Marcus Aurelius</p>
					<p class="postedBy">
					- - Posted in Dec 20, 2007 by <a href="../userHistory.pr%3FpostUser=200.96.95.178.html">200.96.95.178</a> 
										</p>
				</div>
			</div>	
		</div>	
		
					<div class="contentbox-full-border">
			<div class="content-padding">
				<div class="contentbox-noshading">
					<p>Solicito, a atenção de vocês desenvolvedores, embora esteja, eu iniciando no mundo da programação ainda estou em crise com a linguagem, saio de uma e vou para outra; <BR> <BR> <BR> <BR> Foi graças esse pula pula, que descobrir algos que diversas linguagens faltam, uma dessas coisas é o suporte para auxiliar os iniciantes no mundo dos Framework. <BR> Com tais deficiências que encontrei em diversas linguagens de programação eu construir o meu projeto da minha própria linguagem. <BR> <BR> Então peço ajuda de vocês, se puderem ainda, estou tentando aprender a programar mas os materiais didáticos não abordam completamente o certo ele causam uma confusão, no momento dinheiro não tenho se tivesse talvez já aprenderia a programar (Compraria materiais eficientes) mas, preciso que alguém me dê uma dica por qual linguagem devo começar de preferência as interpretadas <BR> um bom exemplo desse é o Python. <BR> <BR> para que se sentiu comovido envie um email para <BR> <BR> mex.stell.com @ gmail.com <BR> <BR> - - Mateus</p>
					<p class="postedBy">
					- - Posted in Dec 10, 2012 by <a href="../userHistory.pr%3FpostUser=187.73.48.130.html">187.73.48.130</a> 
										</p>
				</div>
			</div>	
		</div>	
		
				
</div>				

<div class="contentbox-full">
		<div id="divComment2"  style="display: none;">
		<a href="javascript:toggleVisibility('divComment');toggleVisibility('divComment2');">Add New Comment</a>
	</div>
	<h1>Add New Comment</h1>
	<div id="divComment">
		<form id="edit" name="edit" method="post" action="http://www.vitorpamplona.com/postComment.pr">
			<input type="hidden" name="keyword" value="Interpretando Código em Tempo de Execução com Boo" />
			<p><textarea style="width:96%" name="commentOnlyText" id="commentOnlyText" rows=10></textarea></p>
							<p>Your Name: <input type="text" name="postUserName" value="" /></p>
						<p>
<img src="http://www.vitorpamplona.com/flood.jpg" /><br>
Write the code showed above on the text below.
<br>
<input class="inputText" type="text" id="floodValidation" name="floodValidation" value="" size=20/>
</p>
<p></p>			<p><input type="submit" name="Save" value="Save"></p>	
			<br>
		</form>	
	</div>
</div>	
				
	<script class='javascript'>  
 //<![CDATA[  
if (! window.ActiveXObject ) {
     function FindTagsByName(container, Tag)  
     {  
         var elements = document.getElementsByTagName(Tag);  
         for (var i = 0; i < elements.length; i++)  
         { 
		 if (elements[i].innerHTML.indexOf("def ") > -1
		 ||  elements[i].innerHTML.indexOf("ActiveR") > -1
		 ||  elements[i].innerHTML.indexOf("find_by") > -1	
                 ||  elements[i].innerHTML.indexOf(" => ") > -1
		 ) 
		    elements[i].setAttribute("class", "java");
                 else
		    elements[i].setAttribute("class","java");
		 elements[i].setAttribute("name", "code");
		 elements[i].setAttribute("id", "code");
                 container.push(elements[i]);  
         }  
     }  
     var elements = [];  
     FindTagsByName(elements, "pre");  

  for(var i=0; i < elements.length; i++) {  
   if(elements[i].nodeName.toUpperCase() == "PRE") {  
    brs = elements[i].getElementsByTagName("br");  
    for(var j = 0, brLength = brs.length; j < brLength; j++) {  
       var newNode = document.createTextNode("\n");  
       elements[i].replaceChild(newNode,brs[0]);  
    }  
   }  
  }  

}

   dp.SyntaxHighlighter.HighlightAll("code", false, false);  
 //]]>  
</script>     
		

    <!-- FOOTER -->
    <div class="postedBy"></div>

    <div class="footer footer-font">
       <p><b>Copyright ©Vitor Pamplona | All Rights Reserved</b>  
       <br>Powered by <a href="http://wiki.com.br">Priki</a>. Visite os projetos: <a href="http://eyenetra.com">EyeNetra.com</a> e <a href="http://goblink.co">goBlink.co</a>.   

				- <a href="../showLogin.pr.html" class="selected">Login</a>
        	        	
	</p>
    </div>
  </div>
</body>
</html>
